<!DOCTYPE html>
<html>
  <head>
    <meta name="google-adsense-account" content="ca-pub-6213603518465024">
    <!-- Place this inside the <head> tag -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6213603518465024"
      crossorigin="anonymous"></script>
    <link rel="icon" href="https://cdn.glitch.global/d52a6415-826b-4b02-82db-e300df7a8506/Logo?v=1747925805307" type="image/png" />
    <title>Animal Company Item Maker Stash</title>

    <style>
      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        padding: 20px;
        background: linear-gradient(135deg, #f9ece3, #f0d8c0);
        color: #6b4c3b;
        transition: background-color 0.3s ease, color 0.3s ease;
      }

      .dark-mode {
        background: linear-gradient(135deg, #5c4438, #8a6e5a);
        color: #f0e5d8;
      }

      .dark-mode input,
      .dark-mode select,
      .dark-mode textarea {
        background-color: #7a6450;
        color: #f0e5d8;
        border: 1px solid #c9ad8e;
      }

      h1, h3 {
        font-weight: 700;
        letter-spacing: 1.2px;
        color: #a67856;
        text-shadow: 1px 1px 3px rgba(167, 120, 86, 0.6);
      }

      .dark-mode h1,
      .dark-mode h3 {
        color: #e9d7c1;
        text-shadow: 1px 1px 4px #b28e6a;
      }

      .slot-container {
        border: 2px solid #cbb092;
        padding: 18px;
        margin-bottom: 22px;
        background-color: #fff6ee;
        border-radius: 10px;
        box-shadow: 0 0 15px rgba(203, 176, 146, 0.25);
        transition: background-color 0.3s ease, border-color 0.3s ease;
      }

      .dark-mode .slot-container {
        background-color: #7a6450;
        border-color: #bfa77a;
        box-shadow: 0 0 15px #d4c1a788;
      }

      label {
        display: block;
        margin: 10px 0 6px;
        color: inherit;
        font-weight: 600;
      }

      input,
      select {
        padding: 8px 10px;
        width: 100%;
        max-width: 320px;
        margin-bottom: 8px;
        border: 1.5px solid #bfa77a;
        border-radius: 6px;
        font-size: 14px;
        transition: border-color 0.2s ease;
      }

      input:focus,
      select:focus {
        border-color: #a67856;
        outline: none;
      }

      textarea {
        width: 100%;
        height: 280px;
        padding: 12px;
        font-family: monospace;
        font-size: 14px;
        border: 1.5px solid #bfa77a;
        border-radius: 6px;
        background-color: #fff2e6;
        color: #6b4c3b;
        resize: vertical;
        transition: background-color 0.3s ease, color 0.3s ease;
      }

      .dark-mode textarea {
        background-color: #7a6450;
        color: #e9d7c1;
      }

      button {
        padding: 10px 18px;
        margin-right: 12px;
        margin-top: 14px;
        cursor: pointer;
        background-color: #a67856;
        color: #fff;
        border: none;
        border-radius: 6px;
        font-weight: 700;
        box-shadow: 0 4px 8px rgba(166, 120, 86, 0.4);
        transition: background-color 0.3s ease, box-shadow 0.3s ease;
      }

      button:hover {
        background-color: #7a5633;
        box-shadow: 0 6px 12px rgba(122, 86, 51, 0.6);
      }

      .remove-btn {
        background-color: #d26b4d;
        box-shadow: 0 3px 7px rgba(210, 107, 77, 0.5);
      }

      .remove-btn:hover {
        background-color: #a34c37;
        box-shadow: 0 5px 11px rgba(163, 76, 55, 0.7);
      }

      .color-preview {
        display: inline-block;
        width: 26px;
        height: 26px;
        border: 1.5px solid #a67856;
        margin-left: 12px;
        vertical-align: middle;
        border-radius: 6px;
        box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.1);
        transition: border-color 0.3s ease;
      }

      #modeToggle {
        position: absolute;
        top: 20px;
        right: 20px;
        background-color: #a67856;
        box-shadow: 0 3px 8px rgba(166, 120, 86, 0.6);
      }

      #modeToggle:hover {
        background-color: #7a5633;
        box-shadow: 0 5px 12px rgba(122, 86, 51, 0.8);
      }

      .child-block {
        border-left: 3px solid #bfa77a;
        padding-left: 18px;
        margin-top: 14px;
        transition: border-color 0.3s ease;
      }

      .dark-mode .child-block {
        border-color: #e9d7c1;
      }
    </style>
  </head>
  <body>
    <h2>Inventory Builder</h2>

    <div id="mainItemsContainer"></div>
    <button id="addMainItemBtn">+ Add Main Item (max 5)</button>

    <button style="width: 100%; margin-top: 15px;" onclick="generateJSON()">Generate JSON</button>

    <h3>Generated JSON:</h3>
    <pre id="jsonOutput"></pre>

    <script>
      const itemIDs = [
        "None",
        "item_anti_gravity_grenade",
        "item_apple",
        "item_arrow",
        "item_arrow_heart",
        "item_arrow_lightbulb",
        "item_backpack",
        "item_backpack_black",
        "item_backpack_green",
        "item_backpack_large_base",
        "item_backpack_large_basketball",
        "item_backpack_large_clover",
        "item_backpack_pink",
        "item_backpack_small_base",
        "item_backpack_white",
        "item_backpack_with_flashlight",
        "item_balloon",
        "item_balloon_heart",
        "item_banana",
        "item_baseball_bat",
        "item_big_cup",
        "item_boombox",
        "item_boombox_neon",
        "item_box_fan",
        "item_calculator",
        "item_cardboard_box",
        "item_cash",
        "item_cash_mega_pile",
        "item_cash_pile",
        "item_clapper",
        "item_cluster_grenade",
        "item_cola",
        "item_cola_large",
        "item_company_ration",
        "item_company_ration_heal",
        "item_cracker",
        "item_crate",
        "item_crossbow",
        "item_crossbow_heart",
        "item_crowbar",
        "item_disc",
        "item_disposable_camera",
        "item_dynamite",
        "item_dynamite_cube",
        "item_egg",
        "item_flaregun",
        "item_flashbang",
        "item_flashlight",
        "item_flashlight_mega",
        "item_flashlight_red",
        "item_floppy3",
        "item_floppy5",
        "item_football",
        "item_frying_pan",
        "item_glowstick",
        "item_goldbar",
        "item_grenade",
        "item_heart_chunk",
        "item_heart_gun",
        "item_heartchocolatebox",
        "item_hh_key",
        "item_hookshot",
        "item_hoverpad",
        "item_impulse_grenade",
        "item_jetpack",
        "item_keycard",
        "item_lance",
        "item_large_banana",
        "item_laptop",
        "item_laptop_dog",
        "item_laptop_nyan",
        "item_laptop_rust",
        "item_laptop_surprise",
        "item_laptop_vapor",
        "item_laptop_winxp",
        "item_lemon",
        "item_lolipop",
        "item_mike",
        "item_military_holster",
        "item_mini_cactus",
        "item_money_box",
        "item_money_clip",
        "item_money_pile",
        "item_moneybag",
        "item_newspaper",
        "item_newspaper_crumpled",
        "item_nyan_cat",
        "item_paper_bag",
        "item_pencil",
        "item_pencil_box",
        "item_pencil_drawing",
        "item_pencil_giraffe",
        "item_pencil_nyan",
        "item_pencil_paper",
        "item_pencil_paper_small",
        "item_pencil_paper_white",
        "item_pencil_sheep",
        "item_pepper_shaker",
        "item_pizza",
        "item_pizza_box",
        "item_pizza_box_open",
        "item_pizza_slices",
        "item_pizza_slices_cheese",
        "item_pizza_slices_pepperoni",
        "item_pizza_slices_veggie",
        "item_pizza_toppings",
        "item_pizza_toppings_cheese",
        "item_pizza_toppings_pepperoni",
        "item_pizza_toppings_veggie",
        "item_plastic_cup",
        "item_plastic_cup_red",
        "item_plastic_cup_red_filled",
        "item_plastic_cup_straw",
        "item_plastic_cup_straw_red",
        "item_plastic_cup_straw_red_filled",
        "item_plastic_cup_straw_strawberry",
        "item_plastic_cup_straw_strawberry_filled",
        "item_plastic_cup_straw_vanilla",
        "item_plastic_cup_straw_vanilla_filled",
        "item_plastic_cup_vanilla",
        "item_plastic_cup_vanilla_filled",
        "item_plastic_cup_water",
        "item_plastic_cup_water_filled",
        "item_potted_plant",
        "item_potted_plant_fancy",
        "item_potted_plant_small",
        "item_raspberry",
        "item_raspberry_large",
        "item_rope",
        "item_salt_shaker",
        "item_sandwich",
        "item_sandwich_club",
        "item_sandwich_sub",
        "item_sandwich_tuna",
        "item_screwdriver",
        "item_sewing_kit",
        "item_shiny_gem",
        "item_snowball",
        "item_soda_can",
        "item_soda_can_empty",
        "item_soda_can_open",
        "item_soda_can_redbull",
        "item_soda_can_redbull_empty",
        "item_soda_can_redbull_open",
        "item_soda_can_sunkist",
        "item_soda_can_sunkist_empty",
        "item_soda_can_sunkist_open",
        "item_soda_can_sunkist_peeled",
        "item_soda_can_sunkist_peeled_empty",
        "item_soda_can_sunkist_peeled_open",
        "item_soda_can_sprite",
        "item_soda_can_sprite_empty",
        "item_soda_can_sprite_open",
        "item_soda_can_vanilla",
        "item_soda_can_vanilla_empty",
        "item_soda_can_vanilla_open",
        "item_soda_can_vanilla_peeled",
        "item_soda_can_vanilla_peeled_empty",
        "item_soda_can_vanilla_peeled_open",
        "item_soda_can_water",
        "item_soda_can_water_empty",
        "item_soda_can_water_open",
        "item_sparkler",
        "item_stick",
        "item_stick_bent",
        "item_stick_broken",
        "item_stick_snowman",
        "item_strawberry",
        "item_strawberry_large",
        "item_tomato",
        "item_tomato_large",
        "item_toy_car",
        "item_toy_doll",
        "item_toy_robot",
        "item_trampoline",
        "item_trampoline_broken",
        "item_trampoline_broken_top",
        "item_trampoline_broken_top_white",
        "item_trampoline_broken_white",
        "item_trampoline_top",
        "item_trampoline_white",
        "item_watermelon",
        "item_watermelon_large",
        "item_wrench"
      ];

      const mainItemsContainer = document.getElementById('mainItemsContainer');
      const addMainItemBtn = document.getElementById('addMainItemBtn');
      const jsonOutput = document.getElementById('jsonOutput');

      // Keep track of main items count
      let mainItemCount = 0;
      const maxMainItems = 5;

      // Create a color preview box for input
      function createColorPreview(color = '') {
        const preview = document.createElement('span');
        preview.className = 'color-preview';
        preview.style.backgroundColor = color;
        return preview;
      }

      // Create a child item block (for main item's children)
      function createChildItemBlock(mainItemIndex) {
        const childBlock = document.createElement('div');
        childBlock.className = 'child-block';

        // Child item select
        const childItemLabel = document.createElement('label');
        childItemLabel.textContent = 'Child Item';
        const childItemSelect = document.createElement('select');
        itemIDs.forEach(id => {
          const option = document.createElement('option');
          option.value = id;
          option.textContent = id === 'None' ? 'None' : id;
          childItemSelect.appendChild(option);
        });
        childItemSelect.value = 'None';

        childItemLabel.appendChild(childItemSelect);
        childBlock.appendChild(childItemLabel);

        // Child item key input
        const childKeyLabel = document.createElement('label');
        childKeyLabel.textContent = 'Child Item Key';
        const childKeyInput = document.createElement('input');
        childKeyInput.type = 'text';
        childKeyInput.placeholder = 'Enter child item key';
        childKeyInput.maxLength = 100;
        childKeyLabel.appendChild(childKeyInput);
        childBlock.appendChild(childKeyLabel);

        // Child item color input
        const childColorLabel = document.createElement('label');
        childColorLabel.textContent = 'Child Item Color';
        const childColorInput = document.createElement('input');
        childColorInput.type = 'text';
        childColorInput.placeholder = 'Hex color (e.g. #123abc)';
        childColorInput.maxLength = 7;
        childColorInput.style.width = '160px';

        // Child color preview
        const childColorPreview = createColorPreview();
        childColorInput.addEventListener('input', () => {
          childColorPreview.style.backgroundColor = childColorInput.value || '';
        });
        childColorLabel.appendChild(childColorInput);
        childColorLabel.appendChild(childColorPreview);
        childBlock.appendChild(childColorLabel);

        // Button to remove this child block
        const removeChildBtn = document.createElement('button');
        removeChildBtn.textContent = 'Remove Child Item';
        removeChildBtn.type = 'button';
        removeChildBtn.className = 'remove-btn';
        removeChildBtn.style.marginTop = '8px';
        removeChildBtn.addEventListener('click', () => {
          childBlock.remove();
        });
        childBlock.appendChild(removeChildBtn);

        return childBlock;
      }

      // Create a main item block
      function createMainItemBlock(index) {
        const container = document.createElement('div');
        container.className = 'slot-container';
        container.dataset.index = index;

        // Main Item select
        const itemLabel = document.createElement('label');
        itemLabel.textContent = 'Main Item';
        const itemSelect = document.createElement('select');
        itemIDs.forEach(id => {
          const option = document.createElement('option');
          option.value = id;
          option.textContent = id === 'None' ? 'None' : id;
          itemSelect.appendChild(option);
        });
        itemSelect.value = 'None';
        itemLabel.appendChild(itemSelect);
        container.appendChild(itemLabel);

        // Main Item key input
        const keyLabel = document.createElement('label');
        keyLabel.textContent = 'Main Item Key';
        const keyInput = document.createElement('input');
        keyInput.type = 'text';
        keyInput.placeholder = 'Enter main item key';
        keyInput.maxLength = 100;
        keyLabel.appendChild(keyInput);
        container.appendChild(keyLabel);

        // Main Item color input
        const colorLabel = document.createElement('label');
        colorLabel.textContent = 'Main Item Color';
        const colorInput = document.createElement('input');
        colorInput.type = 'text';
        colorInput.placeholder = 'Hex color (e.g. #123abc)';
        colorInput.maxLength = 7;
        colorInput.style.width = '160px';

        // Color preview box
        const colorPreview = createColorPreview();
        colorInput.addEventListener('input', () => {
          colorPreview.style.backgroundColor = colorInput.value || '';
        });
        colorLabel.appendChild(colorInput);
        colorLabel.appendChild(colorPreview);
        container.appendChild(colorLabel);

        // Children container
        const childrenContainer = document.createElement('div');
        container.appendChild(childrenContainer);

        // Add child button
        const addChildBtn = document.createElement('button');
        addChildBtn.textContent = '+ Add Child Item';
        addChildBtn.type = 'button';
        addChildBtn.style.marginTop = '10px';
        addChildBtn.addEventListener('click', () => {
          const childBlock = createChildItemBlock(index);
          childrenContainer.appendChild(childBlock);
        });
        container.appendChild(addChildBtn);

        // Remove main item button
        const removeBtn = document.createElement('button');
        removeBtn.textContent = 'Remove Main Item';
        removeBtn.type = 'button';
        removeBtn.className = 'remove-btn';
        removeBtn.style.marginTop = '12px';
        removeBtn.addEventListener('click', () => {
          container.remove();
          mainItemCount--;
          addMainItemBtn.disabled = false;
          updateMainItemIndices();
        });
        container.appendChild(removeBtn);

        return container;
      }

      // Update the dataset indices of main items after removing one
      function updateMainItemIndices() {
        const mainItems = mainItemsContainer.querySelectorAll('.slot-container');
        mainItems.forEach((item, idx) => {
          item.dataset.index = idx;
        });
      }

      addMainItemBtn.addEventListener('click', () => {
        if (mainItemCount >= maxMainItems) return;
        const newIndex = mainItemCount;
        const mainItemBlock = createMainItemBlock(newIndex);
        mainItemsContainer.appendChild(mainItemBlock);
        mainItemCount++;
        if (mainItemCount >= maxMainItems) {
          addMainItemBtn.disabled = true;
        }
      });

      // Generate JSON string for the entire inventory structure
      function generateJSON() {
        const mainItems = mainItemsContainer.querySelectorAll('.slot-container');
        const objectsArray = [];

        mainItems.forEach(mainItem => {
          const idx = mainItem.dataset.index;

          const mainItemSelect = mainItem.querySelector('label:nth-child(1) select');
          const mainKeyInput = mainItem.querySelector('label:nth-child(2) input');
          const mainColorInput = mainItem.querySelector('label:nth-child(3) input');

          if (!mainKeyInput.value.trim()) return; // skip if no key

          // Children
          const childrenContainer = mainItem.querySelector('div');
          const childBlocks = childrenContainer.querySelectorAll('.child-block');

          const childrenObjects = [];

          childBlocks.forEach(child => {
            const childItemSelect = child.querySelector('label:nth-child(1) select');
            const childKeyInput = child.querySelector('label:nth-child(2) input');
            const childColorInput = child.querySelector('label:nth-child(3) input');

            if (!childKeyInput.value.trim()) return;

            childrenObjects.push({
              collection: "items",
              key: childKeyInput.value.trim(),
              permission: "owner",
              value: JSON.stringify({
                id: childItemSelect.value,
                color: childColorInput.value.trim(),
              }),
            });
          });

          // Compose main item object with children as a JSON string in value
          const mainValueObj = {
            id: mainItemSelect.value,
            color: mainColorInput.value.trim(),
            children: childrenObjects,
          };

          objectsArray.push({
            collection: "items",
            key: mainKeyInput.value.trim(),
            permission: "owner",
            value: JSON.stringify(mainValueObj),
          });
        });

        jsonOutput.textContent = JSON.stringify(objectsArray, null, 2);
      }
    </script>
  </body>
</html>
